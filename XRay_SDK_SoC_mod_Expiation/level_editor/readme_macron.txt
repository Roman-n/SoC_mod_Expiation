xrLC + xrDO_Light + xrAI (Feb 19 2015)

x64 ТЧ Компиляторы за февраль 2015 build 5859 (автор компиляторов K.D., см. оригинальный readme_KD.txt)

Минимальные требования для компиляторов геометрии и травы: 64-битная операционная система (обычно win7/8 x64).
Минимальные требования для компиляторa ai-сетки: 32-битная операционная система.

Основные преимущества - более быстрые, и им доступно практически неограниченное количество оперативной памяти.
Примечание: build.cform, генерируемый x64 xrlc, _НЕ_ будет грузиться в обычном xrDO_Light, то есть, если компилите уровень с _xrlc_x64.bat, то траву компилить только с _xrdo_light_x64.bat.






Установка: засунуть в папку с ТЧ-SDK.

Пример запуска компилятора геометрии: _xrlc_x64.bat имя_карты (или вписать имя_карты в батник вместо %1)

Пример запуска компилятора травы: _xrdo_light_x64.bat имя_карты (или вписать имя_карты в батник вместо %1)

Компилятор ai-сетеки _xrai_x64.bat здесь описывать не будем, на форумах достаточно инструкций.
Но он лучше стандартного, меньше вылетает.






Описание ключей для _xrlc_x64.bat

-? or -h		== this help
-o			== modify build options
-nosun			== disable sun-lighting
-noise			== disable converting to MU
-norgb			== disable common lightmap calculating (подробности в readme_KD.txt)
-nolmaps		== disable lightmaps calculating (подробности в readme_KD.txt)
-skipinvalid		== skip crash if invalid faces exists (не вылетать на invalid faces)
-lmap_quality		== lightmap quality (четкость лайтмапов,более заметна на r1,в SDK максимум 20,здесь можно больше)
-f<NAME>		== compile level in GameData\Levels\<NAME>\

Пример батника _xrlc_x64.bat:

@start bins\compiler_x64\xrlc.exe -lmap_quality 35 -skipinvalid -f lvl7_yantar





Описание ключей для _xrdo_light_x64.bat

-? or -h		== this help
-f<NAME>		== compile level in gamedata\levels\<NAME>\
-norgb			== disable common lightmap calculating
-nosun			== disable sun-lighting
-o			== modify build options

Пример батника _xrdo_light_x64.bat:

@start bins\compiler_x64\xrdo_light.exe -f lvl7_yantar






ДОРАБОТКИ (by macron)

Исправленный fsgame.ltx для обхода вылета из-за большого количествa файлов (объектов/текстур).

Добавлены недостающие msvc*100-библиотеки.

Правка вылета по d3dx9_43.dll - запустите DirectX.exe для инсталляции в систему дополнительных directx-библиотек.
Правка потенциального вылета 0xc000007b - запустите DirectX.exe для инсталляции в систему дополнительных directx-библиотек.
  Примечание о DirectX.exe
  DirectX - Набор библиотек для мультимедийных приложений и игр.
  Содержит полный DirectX Redistributable x86/x64 за июнь 2010 года.
  Включает компоненты MDX для .NET приложений. Полностью совместим с пакетом .NET Framework.
  Совместим с любой версией Windows.
  Автор simplix.

При отсутствии X64-системы совсем необязательно сносить свою старую, достаточно скачать и установить на DVD или флешку
так называемую Live-систему и загрузиться с нее. Система должна быть win7/8 x64. По тем или иным причинам не все
Live-системы могут быть совместимы с компиляторами. У меня заработали с "OMEGA Live USB 2015" (правда, каждый раз после
загрузки необходимо запускать DirectX.exe и настраивать свап). Но это всё равно удобнее, чем, например, сносить XP и
с нуля ставить новую операционку только ради компиляции.


Обязательно проверьте настройки свапа (файла подкачки) в своей системе.
Я, загрузившись с Live x64-системы обнаружил, что он был вообще отключен. В результате, компиль вылетал по достижении
предела в 4gb, не зависимо от объема физ памяти, пока принудительно не включил свап в 20gb на диске C:\ (или любом другом).
Очевидно, из-за особенностей x64-архитектуры, для компиляции лучше на любой x64-системе всегда заранее включать
принудительный свап 15-20gb. Даже старым 32-битным ТЧ-компиляторам на машине всего с 2gb памяти это помогало
задействовать до 4gb. 

Кликнуть правой Кнопкой мышки на "Мой компьютер" - "Свойства" - "Дополнительные параметры системы",
или "Пуск"-"Настройка"-"Панель управления"-"Система"-"дополнительные параметры системы".
или "Пуск"-"Панель управления"-"Система и безопасность"-"система"-"дополнительные параметры системы".

откроется окно "Свойства системы"
там "дополнительно" - "Быстродействие" - "Параметры":

"Дополнительно" - "Виртуальная память" - "Изменить",
откроется окно "Виртуальная память"
убрать галочку "Автоматически выбирать объем файла подкачки"
выбрать "Указать размер", в полях "Исходный размер" и "Максимальный размер" вписать, например, 20000
нажать кнопку "Задать"
нажать кнопку "Ok","Применить","Ok","Ok".


=========================================================================================================================



ОБ ИНВАЛИД ФЕЙСАХ
Изначально рекомендуется компилить не обходя инвалидные фейсы.
Если компилятор вылетит с сообщением в логе об инвалидных фейсах - запустить LevelEditor, открыть там эту карту,
затем в меню "SCENE" выбрать "Compile"- "Import Error List" и загрузить полученный после неудачной компиляции build_*.err
После этого на карте отобразятся "самые глючные" места, из-за которых вылетает компилятор. По возможности постарайтесь их исправить,снова пребилдить проект и снова пытаться компилировать. Если компилятор все равно вылетает с сообщением в логе об инвалидных фейсах, то тогда уже компилируйте с параметром -skipinvalid. Этот этап точно будет пройден, но памяти при компиляции будет расходоваться больше, и вероятность глюков геометрии/шейдеров в скомпиленном уровне возрастет.

Если компилятор вдруг вылетает, всегда смотрите logs\xrlc_x64_*.log, там может быть подсказка из-за чего или на какой стадии.


О ТРАВЕ
Если трава в самой игре чернеет в удалении от игрока и сильно контрастирует с террейном, попробуйте:
В папке с полученным уровнем берем build_details.dds, и через paint.net пересохраняем как DXT1 с мип-мапами.

О ТЕРРЕЙНЕ
Текстуру террейна (находится в папке с уровнем в подпапке terrain) иногда тоже приходится фиксить - снижать на треть saturation и увеличивать прозрачность.
Увеличение прозрачности террейна также снижает яркость модели игрока на dx8.
Если террейн кажется слишком светлым, можно через paint.net повысить его прозрачность c 255 до 200-150. Сохранять как DXT5 без мип-мапов.
Но будьте внимательны, глюки не исключены.




22.03.2015
macron